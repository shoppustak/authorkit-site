const AMAZON_AFFILIATE_TAG="authorkit-20";function createBookCard(e){const t=document.createElement("div");t.className="book-card";const n=document.createElement("div");n.className="book-cover-wrapper";const o=document.createElement("img");o.src=e.cover.medium||e.cover.large||"/images/placeholder-book.jpg",o.alt=e.title,o.className="book-cover",o.loading="lazy",n.appendChild(o),t.appendChild(n);const a=document.createElement("div");a.className="book-info";const r=document.createElement("h3");r.className="book-title",r.textContent=e.title,a.appendChild(r);const c=document.createElement("p");if(c.className="book-author",c.textContent=`by ${e.author.name||"Unknown Author"}`,a.appendChild(c),e.genres&&e.genres.length>0){const t=document.createElement("div");t.className="book-genres",e.genres.forEach(e=>{const n=document.createElement("span");n.className="genre-badge",n.textContent=formatGenreName(e),t.appendChild(n)}),a.appendChild(t)}if(e.rating&&e.rating>0){const t=document.createElement("div");t.className="book-rating";const n=document.createElement("span");n.className="stars",n.textContent=getStarRating(e.rating),t.appendChild(n);const o=document.createElement("span");o.textContent=`${e.rating} (${e.review_count||0} reviews)`,t.appendChild(o),a.appendChild(t)}const i=document.createElement("div");i.className="book-actions";const s=document.createElement("a");s.href=e.book_url||e.author.site_url,s.className="btn-view-site",s.textContent="View on Author's Site",s.target="_blank",s.rel="noopener noreferrer",i.appendChild(s);const l=e.purchase_links.amazon_com||e.purchase_links.amazon_in;if(l){const e=document.createElement("a");e.href=addAffiliateTag(l),e.className="btn-buy",e.textContent="Buy on Amazon",e.target="_blank",e.rel="noopener noreferrer nofollow",i.appendChild(e)}return a.appendChild(i),t.appendChild(a),t}function formatGenreName(e){return{"action-adventure":"Action & Adventure",childrens:"Children's Books",fantasy:"Fantasy","historical-fiction":"Historical Fiction",horror:"Horror","literary-fiction":"Literary Fiction","mystery-crime":"Mystery & Crime","non-fiction":"Non-Fiction",poetry:"Poetry",romance:"Romance","science-fiction":"Science Fiction","self-help":"Self-Help","thriller-suspense":"Thriller & Suspense","young-adult":"Young Adult",other:"Other"}[e]||e}function getStarRating(e){const t=Math.floor(e),n=e%1>=.5,o=5-t-(n?1:0);return"★".repeat(t)+(n?"½":"")+"☆".repeat(o)}function addAffiliateTag(e){if(!e)return"";try{const t=new URL(e);return t.hostname.includes("amazon.")?(t.searchParams.set("tag","authorkit-20"),t.toString()):e}catch(t){return console.error("Invalid URL:",e),e}}function getUrlParam(e){return new URLSearchParams(window.location.search).get(e)}function updateUrlParams(e){const t=new URLSearchParams(window.location.search);Object.keys(e).forEach(n=>{e[n]?t.set(n,e[n]):t.delete(n)});const n=`${window.location.pathname}?${t.toString()}`;window.history.pushState({},"",n)}function debounce(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}